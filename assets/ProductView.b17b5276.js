var j=Object.defineProperty;var f=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var h=(d,i,t)=>i in d?j(d,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[i]=t,_=(d,i)=>{for(var t in i||(i={}))L.call(i,t)&&h(d,t,i[t]);if(f)for(var t of f(i))S.call(i,t)&&h(d,t,i[t]);return d};import{k as M,l as B,e as b,s as n,m as N,p as D,o as l,c as U,w as x,d as e,t as v,u as s,b as u,j as R,q as m,x as p,v as F,F as O,h as A,y as E,a as y}from"./index.34e0486f.js";import{_ as H}from"./PageComponent.a2ec6fd6.js";const I={class:"flex items-center justify-between"},J={class:"text-3xl font-bold text-gray-900"},T=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 -mt-1 inline-block",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),$=y(" Supprimer Produit "),q=[T,$],z={key:0,class:"flex justify-center"},G=["onSubmit"],K={class:"shadow sm:rounded-md sm:overflow-hidden"},Q={class:"px-4 py-5 bg-white space-y-6 sm:p-6"},W=e("label",{class:"block text-sm font-medium text-gray-700"}," Image ",-1),X={class:"mt-1 flex items-center"},Y=["src","alt"],Z={key:1,class:"flex items-center justify-center h-12 w-12 rounded-full overflow-hidden bg-gray-100"},ee=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-[80%] w-[80%] text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),te=[ee],oe={type:"button",class:"relative overflow-hidden ml-5 bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},se=y(" Changer "),re=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Nom",-1),ie=e("label",{for:"prix",class:"block text-sm font-medium text-gray-700"},"Prix",-1),ae=e("label",{for:"category",class:"block text-sm font-medium text-gray-700"},"Categorie",-1),ne=e("option",null,"Choisir une categorie",-1),de=["value"],le=e("label",{for:"about",class:"block text-sm font-medium text-gray-700"}," Description ",-1),ue={class:"mt-1"},ce=e("div",{class:"px-4 py-3 bg-gray-50 text-right sm:px-6"},[e("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:offset-2 focus-ring-indigo-500"}," Sauvegarder ")],-1),fe={setup(d){const i=M(),t=B(),w=b(()=>n.state.currentProduct.loading),g=b(()=>n.state.categories);let o=N({image:null,description:null,image_url:null,name:null,category_id:null,prix:null});D(()=>n.state.currentProduct.data,(c,a)=>{o.value=_({},JSON.parse(JSON.stringify(c)))}),g.loaded||n.dispatch("getCategories"),t.params.id?n.dispatch("getProduct",t.params.id):n.commit("setCurrentProductLoading",!1);function k(c){const a=c.target.files[0],r=new FileReader;r.onload=()=>{o.value.image=r.result,o.value.image_url=r.result},r.readAsDataURL(a)}function C(){n.dispatch("saveProduct",o.value).then(({data:c})=>{n.commit("notify",{type:"success",message:"Le produit a bien ete sauvegardee."}),i.push({name:"ProductView",params:{id:c.data.id}})})}function P(){confirm("Etes vous sur de vouloir supprimer ce produit? Operation irreversible.")&&n.dispatch("deleteProduct",o.value.id).then(()=>{i.push({name:"Products"})})}return(c,a)=>(l(),U(H,null,{header:x(()=>[e("div",I,[e("h1",J,v(s(t).params.id?`Produit ${s(t).params.id}`:"Cr\xE9er un Produit"),1),s(t).params.id?(l(),u("button",{key:0,type:"button",onClick:P,class:"py-2 px-3 text-white bg-red-500 rounded-md hover:bg-red-700"},q)):R("",!0)])]),default:x(()=>[s(w)?(l(),u("div",z,"Chargement...")):(l(),u("form",{key:1,onSubmit:E(C,["prevent"]),class:"animate-fade-in-down"},[e("div",K,[e("div",Q,[e("div",null,[W,e("div",X,[s(o).image_url?(l(),u("img",{key:0,src:s(o).image_url,alt:s(o).title,class:"w-64 h-48 object-cover"},null,8,Y)):(l(),u("span",Z,te)),e("button",oe,[e("input",{type:"file",onChange:k,class:"absolute left-0 top-0 right-0 bottom-0 opacity-0 cursor-pointer"},null,32),se])])]),e("div",null,[re,m(e("input",{type:"text",name:"name",maxlength:"250",id:"name","onUpdate:modelValue":a[0]||(a[0]=r=>s(o).name=r),autocomplete:"product_name",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[p,s(o).name]])]),e("div",null,[ie,m(e("input",{type:"number",name:"prix",id:"prix","onUpdate:modelValue":a[1]||(a[1]=r=>s(o).prix=r),autocomplete:"product_prix",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[p,s(o).prix]])]),e("div",null,[ae,m(e("select",{name:"category",id:"category","onUpdate:modelValue":a[2]||(a[2]=r=>s(o).category_id=r),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},[ne,(l(!0),u(O,null,A(s(g).data,(r,V)=>(l(),u("option",{key:V,value:r.id},v(r.name),9,de))),128))],512),[[F,s(o).category_id]])]),e("div",null,[le,e("div",ue,[m(e("textarea",{id:"description",name:"description",rows:"3","onUpdate:modelValue":a[3]||(a[3]=r=>s(o).description=r),autocomplete:"product_description",class:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md",placeholder:"D\xE9crire votre publication"},null,512),[[p,s(o).description]])])])]),ce])],40,G))]),_:1}))}};export{fe as default};

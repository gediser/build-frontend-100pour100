import{_,A as a,s as r,o as n,b as u,d as i,q as b,x as h,B as m,y as d,F as f,h as v}from"./index.79a00172.js";const g={mounted(){a.get("/juste-pour-vous-publications/get-all").then(({data:t})=>{this.juste_pour_vous_publications=this.juste_pour_vous_publications.concat(t.data)})},methods:{inserer(){this.publications=this.publications.trim();const t=this.publications.split(",");for(let e=0;e<t.length;e++)if(this.juste_pour_vous_publications.findIndex(c=>c.id===parseInt(t[e]))>=0){r.commit("notify",{message:"Echec, une publication est deja presente "+t[e],type:"fail"});return}if(this.publications.split(",").length+this.juste_pour_vous_publications.length>10){r.commit("notify",{message:"Echec, publications superieures a 10",type:"fail"});return}a.get(`/publications/get?pubs=${this.publications}`).then(({data:e})=>{this.juste_pour_vous_publications=this.juste_pour_vous_publications.concat(e.data),r.commit("notify",{message:"Operation reussie",type:"success"})})},deletePublication(t){this.juste_pour_vous_publications.splice(t,1)},confirmer(){if(this.juste_pour_vous_publications.length==0){r.commit("notify",{message:"La selection ne contient pas de publications.",type:"fail"});return}const t=this.juste_pour_vous_publications.map(e=>({publication_id:e.id}));a.post("/juste-pour-vous-publications/save",{publications:t}).then(()=>{r.commit("notify",{message:"La selection a ete enregistree.",type:"success"})})}},data(){return{publications:"",juste_pour_vous_publications:[]}}},x={class:"p-12 pb-32"},y=i("button",{class:"relative -top-[1px] h-8 bg-belge text-white px-2 border border-belge hover:text-red-500"},"Inserer",-1),j={key:0,id:"publications",class:"py-4 flex flex-wrap gap-4"},w=["src"],k=["onClick"],C=i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),B=[C],P={key:1},E=i("p",null,"Pas de publications pour la section juste pour vous.",-1),L=[E],M={class:"flex justify-center"};function F(t,e,c,I,l,o){return n(),u("div",x,[i("form",{onSubmit:e[2]||(e[2]=d((...s)=>o.inserer&&o.inserer(...s),["prevent"]))},[b(i("input",{class:"h-8 w-[50%] border-2 border-belge rounded-l-full lg:rounded-r-0 pl-4 m-0 focus:outline-2 focus:ring focus:border-belge",type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>l.publications=s),placeholder:"Entrez les id des plublications. ex: 1,2,3",onKeydown:e[1]||(e[1]=m(d((...s)=>o.inserer&&o.inserer(...s),["prevent"]),["enter"]))},null,544),[[h,l.publications]]),y],32),l.juste_pour_vous_publications.length>0?(n(),u("div",j,[(n(!0),u(f,null,v(l.juste_pour_vous_publications,(s,p)=>(n(),u("div",{class:"relative",key:p},[i("img",{class:"h-24 w-24",alt:"publication",src:s.image_url},null,8,w),(n(),u("svg",{onClick:A=>o.deletePublication(p),xmlns:"http://www.w3.org/2000/svg",class:"absolute top-1 right-1 h-6 w-6 text-white bg-gray-300 rounded-full cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},B,8,k))]))),128))])):(n(),u("div",P,L)),i("div",M,[i("button",{onClick:e[3]||(e[3]=(...s)=>o.confirmer&&o.confirmer(...s)),class:"w-[50%] text-center bg-belge hover:scale-110 text-white hover:text-red-500 px-3 py-2 rounded-md text-sm font-medium"},"Confirmer Publications Juste Pour vous")])])}var K=_(g,[["render",F]]);export{K as default};

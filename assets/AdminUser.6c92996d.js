import{_ as g,A as h,o as n,b as o,d as e,q as f,x as _,B as x,y as u,F as k,h as p,t as i,j as c}from"./index.79a00172.js";const v={components:{},methods:{getUsers(s){s=s.trim();const t=this;h.get(`/users/search?email=${s}`).then(({data:d})=>{t.data=d})},showRole(s){let t="user";return s.findIndex(d=>d.name==="admin")>=0&&(t="admin"),s.findIndex(d=>d.name==="manager")>=0&&(t="manager"),t},search(){this.getUsers(this.email)},makeAdmin(s){const t=this;h.post("/users/make/admin",{id:s}).then(()=>{t.getUsers(this.email)})},makeUser(s){const t=this;h.post("/users/make/user",{id:s}).then(()=>{t.getUsers(this.email)})}},mounted(){this.getUsers(this.email)},data(){return{data:[],email:""}}},y={class:"p-12 pb-32"},w=e("button",{class:"relative -top-[1px] h-8 bg-belge text-white px-2 border border-belge hover:text-red-500"},"Chercher",-1),U={key:0,class:"w-full text-center"},C=e("thead",null,[e("tr",{class:"border-b-2 border-gray-300 h-12"},[e("th",null,"Id"),e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Role"),e("th",null,"Actions")])],-1),A=["onClick"],R=["onClick"],B={key:1},D=e("h3",{class:"border-b-2 border-gray-300 h-12 text-center font-bold"}," Pas de resultats ",-1),E=[D];function I(s,t,d,N,a,l){return n(),o("div",y,[e("form",{onSubmit:t[2]||(t[2]=u((...r)=>l.search&&l.search(...r),["prevent"])),class:"mb-6"},[f(e("input",{class:"h-8 border-2 border-belge rounded-l-full lg:rounded-r-0 pl-4 m-0 focus:outline-2 focus:ring focus:border-belge",type:"email",placeholder:"Entrez l'email","onUpdate:modelValue":t[0]||(t[0]=r=>a.email=r),onKeydown:t[1]||(t[1]=x(u((...r)=>l.search&&l.search(...r),["prevent"]),["enter"]))},null,544),[[_,a.email]]),w],32),a.data.length>0?(n(),o("table",U,[C,e("tbody",null,[(n(!0),o(k,null,p(a.data,(r,m)=>(n(),o("tr",{key:m,class:"border-b-2 border-gray-300 h-12"},[e("td",null,i(r.id),1),e("td",null,i(r.name),1),e("td",null,i(r.email),1),e("td",null,i(l.showRole(r.roles)),1),e("td",null,[l.showRole(r.roles)==="user"?(n(),o("button",{key:0,onClick:b=>l.makeAdmin(r.id),class:"h-8 bg-belge text-white px-2 rounded-md border border-belge hover:text-red-500 hover:scale-110"},"Devenir Admin",8,A)):c("",!0),l.showRole(r.roles)==="admin"?(n(),o("button",{key:1,onClick:b=>l.makeUser(r.id),class:"h-8 bg-belge text-white px-2 rounded-md border border-belge hover:text-red-500 hover:scale-110"},"Devenir User",8,R)):c("",!0)])]))),128))])])):(n(),o("div",B,E))])}var F=g(v,[["render",I]]);export{F as default};

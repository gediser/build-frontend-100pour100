import{_ as p,A as c,s as o,o as n,b as r,d as i,q as h,x as b,B as _,y as d,F as f,h as g}from"./index.e302962f.js";const x={mounted(){c.get("/meilleur-classement/get-all").then(({data:t})=>{this.meilleur_classement=this.meilleur_classement.concat(t.data)})},methods:{inserer(){this.publications=this.publications.trim();const t=this.publications.split(",");for(let e=0;e<t.length;e++)if(this.meilleur_classement.findIndex(u=>u.id===parseInt(t[e]))>=0){o.commit("notify",{message:"Echec, une publication est deja presente "+t[e],type:"fail"});return}if(this.publications.split(",").length+this.meilleur_classement.length>10){o.commit("notify",{message:"Echec, publications superieures a 10",type:"fail"});return}c.get(`/publications/get?pubs=${this.publications}`).then(({data:e})=>{this.meilleur_classement=this.meilleur_classement.concat(e.data),o.commit("notify",{message:"Operation reussie",type:"success"})})},deletePublication(t){this.meilleur_classement.splice(t,1)},confirmer(){if(this.meilleur_classement.length==0){o.commit("notify",{message:"La selection ne contient pas de publications.",type:"fail"});return}const t=this.meilleur_classement.map(e=>({publication_id:e.id}));c.post("/meilleur-classement/save",{publications:t}).then(()=>{o.commit("notify",{message:"La selection a ete enregistree.",type:"success"})})}},data(){return{publications:"",meilleur_classement:[]}}},y={class:"p-12 pb-32"},v=i("button",{class:"relative -top-[1px] h-8 bg-belge text-white px-2 border border-belge hover:text-red-500"},"Inserer",-1),w={key:0,id:"publications",class:"py-4 flex flex-wrap gap-4"},k=["src"],C=["onClick"],B=i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),M=[B],E={key:1},L=i("p",null,"Pas de publications pour la section meilleur classement.",-1),P=[L],j={class:"flex justify-center"};function I(t,e,u,A,a,l){return n(),r("div",y,[i("form",{onSubmit:e[2]||(e[2]=d((...s)=>l.inserer&&l.inserer(...s),["prevent"]))},[h(i("input",{class:"h-8 w-[50%] border-2 border-belge rounded-l-full lg:rounded-r-0 pl-4 m-0 focus:outline-2 focus:ring focus:border-belge",type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>a.publications=s),placeholder:"Entrez les id des plublications. ex: 1,2,3",onKeydown:e[1]||(e[1]=_(d((...s)=>l.inserer&&l.inserer(...s),["prevent"]),["enter"]))},null,544),[[b,a.publications]]),v],32),a.meilleur_classement.length>0?(n(),r("div",w,[(n(!0),r(f,null,g(a.meilleur_classement,(s,m)=>(n(),r("div",{class:"relative",key:m},[i("img",{class:"h-24 w-24",alt:"publication",src:s.image_url},null,8,k),(n(),r("svg",{onClick:F=>l.deletePublication(m),xmlns:"http://www.w3.org/2000/svg",class:"absolute top-1 right-1 h-6 w-6 text-white bg-gray-300 rounded-full cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},M,8,C))]))),128))])):(n(),r("div",E,P)),i("div",j,[i("button",{onClick:e[3]||(e[3]=(...s)=>l.confirmer&&l.confirmer(...s)),class:"w-[50%] text-center bg-belge hover:scale-110 text-white hover:text-red-500 px-3 py-2 rounded-md text-sm font-medium"},"Confirmer Publications Meilleur Classement")])])}var V=p(x,[["render",I]]);export{V as default};
